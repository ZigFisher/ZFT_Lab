---
layout:     post
title:      "Трюки и хаки при экспериментах с IPCam от Xiong Mai"
tagline:    ""
category:   ""
group:      ipcam
tags:       [hi3518e, ipcam, zftlab]
---


h3. Введение

p. Материал в стадии оформления. Последнее обновление - 2018.02.04

---

h3. Благодарности

p. Данная информация является результатом совместной работы дружной компании на канале "Telegram":http://t.me/joinchat/FhtyHxDpQsv8HlRliQDgqw

* "ESonya":http://www.cctvsp.ru/ - Игорь, г.Сергиев Посад
* "FlyRouter":http://zftlab.org - Игорь, г.Симферополь
* "max380":/ - Максим, г.Екатеринбург
* "Octonix":https://www.facebook.com/octonix.net/ - Виталий, г.Киев
* "Oleg34":https://vk.com/id379460034 - Олег, г.Волгоград

---

h3. Создание полного дампа с Flash устройства (ff, fullflash)

p. СТРОГО РЕКОМЕНДУЕТСЯ СДЕЛАТЬ ДАННУЮ МАНИПУЛЯЦИЮ ПЕРЕД ЛЮБЫМИ ЭКСПЕРИМЕНТАМИ !

p. Настройте TFTP сервер и проверьте доступ к нему

pre. #
set serverip 192.168.1.254                     // Устанавка адреса TFTP сервера
sf probe 0                                     // Разрешение записи на флешку (надо-ли ?)
sf read 0x82000000 0x0 0x800000                // Чтение всей флешки в память
tftp 0x82000000 ff.img 0x800000                // Выгрузка дампа (fullflash) на TFTP сервер

---

h3. Обновление загрузчика (u-boot bootloader) через консоль

p. Настройте TFTP сервер и положите на него фаил u-boot.bin

p. Важно !  Всегда проверяйте первый байт загрузчика что-бы не получить "кирпич" !

pre. #
mw.b 0x82000000 0xFF 0x40000                   // Очистка памяти под запись
set serverip 192.168.1.254                     // Устанавка адреса TFTP сервера
tftp 0x82000000 u-boot.bin                     // Загрузка в память загрузчика
sf probe 0                                     // Разрешение записи на флешку
sf erase 0 0x40000                             // Очистка части флешки под запись
sf write 0x82000000 0 0x40000                  // Запись загрузчика из памяти на флешку
reset                                          // Рестарт устройства

---

h3. Обновление полного дампа устройства (ff, fullflash) через консоль

p. Настройте TFTP сервер и положите на него фаил дампа ff.img

p. Важно !  В результате вы получите полный дубликат устройства с которого сняли дамп !

pre. #
set serverip 192.168.1.254                     // Устанавка адреса TFTP сервера
sf probe 0                                     // Разрешение записи на флешку
tftp 0x82000000 ff.img                         // Загрузка в память дампа (fullflash)
sf erase 0x000000000000 0x1000000              // Очистка всей флешки под запись
sf write 0x82000000 0x000000000000 0x1000000   // Запись дампа (fullflash) из памяти на флешку
reset                                          // Рестарт устройства

---

h3. Внутренние ссылки

<ul>
  {% assign pages_list = site.posts %}
  {% assign group = 'ipcam' %}
  {% include JB/pages_list %}
</ul>

---

h3. Внешние ссылки

* -
