---
layout:     post
title:      "Экспериментальные Open Source прошивки для устройств Xiong Mai"
tagline:    ""
category:   ""
group:      ipcam
tags:       [hi3516c, ipcam, zftlab]
---


h3. Введение

p. Материал по проекту находится в стадии оформления. Последнее обновление - 2018.02.15

p{color:red}. Используя данный Сайт, Вы выражаете свое согласие с "«Отказом от ответственности»":/disclaimer.html и принимаете всю ответственность за выполняемые действия с оборудованием и программным обеспечением на себя !

p{color:blue}. Просьба - при использовании материалов с сайта в своих проектах, указывать первоисточник. Спасибо!

---

h3. Open Source project

p. В тестовых прошивках пока нет поддержки Video, запись на FLASH не производится, старт системы происходит только из памяти.

p. На данный момент только тестируются: возможность загрузки ядра Linux на разных типах процессоров Hisilicon, минимальная файловая система, автоматическое детектирование сенсоров и работа сетевого интерфейса Ethernet.

p. Данные прошивки являются промежуточными перед созданием последующих уже в среде разработки "OpenWrt":https://github.com/ZigFisher/chaos_calmer и предназначены только для опытных пользователей, умеющих работать с UART консолью и командами U-boot.

p. С 2018.02.15 все компоненты (утилиты и библиотеки) собираются при помощи нашего "OpenWrt toolchain":https://github.com/ZigFisher/chaos_calmer размещённого на "GitHub":https://github.com/ZigFisher и там-же находится простейшая "Вики":https://github.com/ZigFisher/chaos_calmer/wiki/IPCam-with-Hisilicon-SoC's для сбора информации об различных IPCam в группе "Telegram - XM IPCam modding":http://t.me/joinchat/FhtyHxDpQsv8HlRliQDgqw

p. Команды обновления проекта "XM IPCam modding":https://t.me/joinchat/FhtyHxDpQsv8HlRliQDgqw на "GitHub":https://github.com/ZigFisher/chaos_calmer

pre. #
cd chaos_calmer
git pull
./scripts/feeds update -a
#./scripts/feeds install -a
cp -v target/linux/hisilicon/examples/.config_current ./.config
make clean && make -j1 V=s

pre. #
# Добавление программ из Glutinium
cd chaos_calmer
cp ./feeds.conf.default ./feeds.conf
echo "src-git glutinium https://github.com/ZigFisher/Glutinium.git" >>./feeds.conf
./scripts/feeds update glutinium
./scripts/feeds list -r glutinium
./scripts/feeds install empty etherdump homes-smart httping i2c-telemetry i2c-tools
./scripts/feeds install littlewire  micronucleus mercury236 microbe mini_snmpd remserial
./scripts/feeds install  rs485conf tg-bot1 vtun-lite
#

---

h3. Архив прошивок

p. Экспериментальные Open Source прошивки (без поддержки Video, только ядро и сеть).

|_=. Список поддерживаемых платформ и SoC                |_=. Тестовая сборка Buildroot                                                             |_=. Тестовая сборка OpenWrt   |
|<. Для любых устройств XM на базе HI3518Cv1 и HI3518Ev1 |=. "скачать":http://flyrouter.net/downloads/software/ipcam/Open_Source_Project/HI_SoC_v1/ |={color:orange}. в разработке |
|<. Для любых устройств XM на базе HI3518Cv2 и HI3518Ev2 |=. "скачать":http://flyrouter.net/downloads/software/ipcam/Open_Source_Project/HI_SoC_v1/ |={color:orange}. в разработке  |
|<. Для любых устройств XM на базе HI3520v1 и HI3521v1   |={color:orange}. в разработке                                                             |={color:orange}. в разработке  |
|<. Для любых устройств XM на базе HI3520v2              |={color:orange}. в разработке                                                             |={color:orange}. в разработке  |
|                                                        |                                                                                          | |

p. Тестирование выполнено успешно на IPCam: 06510, 18510, 18520

p. Тестирование выполнено успешно на NVR: 00117

p{color:green}. Просьба: присылайте ID проверенных устройств и не стесняйтезь задавать вопросы группе "Telegram":http://t.me/joinchat/FhtyHxDpQsv8HlRliQDgqw

---

h3. Загрузка экспериментальных прошивок

p. Настройте TFTP сервер и положите на него соответствующий фаил uImage

p. Выполните в консоли, нажав Ctrl+C для остановки загрузки ядра после подачи питания на модуль

pre. #
setenv serverip 192.168.1.254                  // Устанавка адреса TFTP сервера
setenv bootargs mem=40M console=ttyAMA0,115200 // Установка переменных для передачи ядру
tftp 0x82000000 uImage                         // Загрузка в память экспериментальной системы
bootm 0x82000000                               // Старт системы из памяти

p. Или, если сервер указан правильно, одной командой

pre. setenv bootargs mem=40M console=ttyAMA0,115200 ; tftp 0x82000000 uImage ; bootm 0x82000000

p. После загрузки устройство имеет адрес 192.168.1.15/24. Для изменения выполните команды ниже.

pre. #
vi /etc/network/interfaces                     // Установка сетевых настроек
/etc/init.d/S40network restart                 // Рестарт сетевого интерфейса

p. Пароль для root не установлен. Выполните *passwd root* для необходимости доступа через SSH.

p. -RTSP потоки доступны по адресам rtsp://192.168.1.15:554/0 и rtsp://192.168.1.15:554/1- (отключено!)

p. Посылая сигнал -SIGUSR1 демону snapshotd можно добиться получения снимков (тестовая функция)

pre. # snapshotd -p /tmp/ -f snap.jpg rtsp://127.0.0.1:554/0        // запуск демона в консоли

p. Альтернативный вариант для получения снапшотов и роликов - использовать утилиту *sample_venc*

---

h3. Компоненты для разработчиков 

p. Готовые для использования программы, библиотеки и китайские SDK доступны по ссылкам ниже.

|_=. Утилиты и библиотеки |_=. Зависимости компонентов                     |_=. Ссылка |
|<. busybox               |<. libc                                         | скачать   |
|<. bwm-ng                |<. libc                                         | скачать   |
|<. chat                  |<. libc                                         | скачать   |
|<. curl                  |<. libc, libcurl                                | скачать   |
|<. dropbear              |<. libc                                         | скачать   |
|<. empty                 |<. libc, libutil                                | скачать   |
|<. etherdump             |<. libc                                         | скачать   |
|<. haserl                |<. libc                                         | скачать   |
|<. homes-smart           |<. libc, libusb-compat                          | скачать   |
|<. httping               |<. libc                                         | скачать   |
|<. iw                    |<. libc, libnl-tiny                             | скачать   |
|<. iwinfo                |<. libc, libiwinfo                              | скачать   |
|<. jsonfilter            |<. libc, libubox, libjson-c                     | скачать   |
|<. libblobmsg-json       |<. libc, libjson-c, libubox                     | скачать   |
|<. libc                  |<. libgcc                                       | скачать   |
|<. libcares              |<. libc                                         | скачать   |
|<. libcurl               |<. libc, libpolarssl                            | скачать   |
|<. libgcc                |<. -                                            | скачать   |
|<. libiwinfo             |<. libc, libnl-tiny, libuci                     | скачать   |
|<. libjson-c             |<. libc                                         | скачать   |
|<. libmosquitto          |<. libc, libpthread, librt, libcares            | скачать   |
|<. libnl-tiny            |<. libs                                         | скачать   |
|<. libpolarssl           |<. libc                                         | скачать   |
|<. librt                 |<. libpthread                                   | скачать   |
|<. libubox               |<. libc                                         | скачать   |
|<. libubus               |<. libc, libubox                                | скачать   |
|<. libuci                |<. libc, libubox                                | скачать   |
|<. libusb                |<. libc, libpthread, librt                      | скачать   |
|<. libusb-compat         |<. libc, libusb                                 | скачать   |
|<. libuuid               |<. libc                                         | скачать   |
|<. mosquitto-client      |<. libc, librt, libuuid, libcares, libmosquitto | скачать   |
|<. ppp                   |<. libc, libutil, kmod-ppp                      | скачать   |
|<. usb-modeswitch        |<. libc, libubox, libblobmsg-json, libusb       | скачать   |
|<. usbreset              |<. libc                                         | скачать   |
|<. vtund                 |<. libc, kmod-tun                               | скачать   |
|<. wpa-supplicant        |<. libc, libnl-tiny                             | скачать   |

---

h3. Внутренние ссылки

<ul>
  {% assign pages_list = site.posts %}
  {% assign group = 'ipcam' %}
  {% include JB/pages_list %}
</ul>

---

h3. Внешние ссылки

* "ZFT Lab. & Yandex.Disk: Китайские SDK для процессоров Hisilicon":https://yadi.sk/d/bFlKO3843SFV8v/SDK
* "ZFT Lab. & FlyRouter: Готовые для использования программы и библиотеки":http://flyrouter.net/downloads/software/ipcam/For_Developers/
