---
layout:     post
title:      "Моддинг прошивки IP камеры HI3518E_50H10L_S39 - ID 6510"
tagline:    ""
category:   ""
group:      ipcam
tags:       [hi3518e, ipcam, zftlab]
---


h3. Эпиграф

p. Пока Билли Бонс пьёт ром в трактире "Адмирал Бенбоу", его соперник Джон Сильвер собирает команду и готовится считать пиастры....

---

h3. Введение

p. Начало работы над проектом. Материал в стадии оформления.

p. Последнее обновление - 2018.01.23 22:10

---

p=. !/images/2018010701.jpg!

p=. Вариант подключения распространённого USB WiFi донгла к плате HI3518E_50H10L_S39

---

p=. !/images/2018010712.jpg!

p=. Пример отображения альтернативного WEB-интерфейса IPCam для партнёра "Octonix":https://www.facebook.com/octonix.net/

---

p=. !/images/2018010711.jpg!

p=. Консольный вывод информации о сетевых интерфейсах - работа идет через USB WiFi

---

h3. Задачи и возможности модифицированной прошивки

p. Прошивка создаётся для внутренних нужд ZFT Lab. и партнёрских проектов.

p. Принять участие в тестировании можно после письменного обращения на контактный Email.

p. Прошивка позволяет подключать через USB интерфейс:

* Flash-накопители ёмкостью до 32Gb с файловой системой VFAT
* Wi-Fi донглы на чипсетах MT7601 и RT3070 (другие пока не поддерживаются)
* 3G/4G модемы, работающие в режиме стандартных портов ввода-вывода ttyACM и ttyUSB (тест)

p. Прошивка позволяет строить L2 VPN туннели:

* На публичные партнёрские сервера - FlyHub.org, FlyMon.net, Octonix.net и ZFTLab.org
* На любые приватные сервера с OS Linux (Debian/Ubuntu предпочтительны, есть инструкция)

p. Прошивка позволяет отправлять уведомления и скриншоты с камеры:

* При срабатывании внешнего датчика движения и замыкании контактов на PCB
* Отправка может осуществляться как на E-mail, так и в группу Telegram

p. Прошивка имеет альтернативный WEB-интерфейс, который:

* Работает параллельно с унылой поделкой китайских разработчиков
* Работает в любом браузере и на любом устройстве, в т.ч. на мобильных телефонах
* Имеет современный дизайн и систему автоматически настраиваемых плагинов
* Может быть оперативно изменён под дизайн проекта заказчика или интегратора

p. Прошивка содержит множество скриптов, модулей ядра и GPL программ, собранных из исходников (см.ниже)

p. Прошивка _специально_ разрабатывается для устройств с малым объёмом FLASH памяти (8 Mb)

---

h3. Программы

* bwm-ng -
* dropbear -
* haserl - простой CGI интерпретатор
* vtund -
* wpa_passphrase -
* wpa_supplicant -

---

h3. Аплеты Busybox

* klogd - аплет,
* logread - аплет,
* syslogd - аплет,

---

h3. Скрипты

* microconf - скрипт, отвечающий за генерацию и проверку основного конфига /mnt/mtd/ipcam.conf
* tapip - скрипт,
* tuneller - скрипт,
* usb_storage - скрипт,
* usb_wifi - скрипт,
* wifi - скрипт,

---

h3. Конфигурационные файлы

* /mnt/mtd/ipcam.conf - основной конфигурационный файл системы, пример представлен ниже
* /var/tmp/vtund.conf - файл конфигурации VTUNd, генерируется автоматически
* /var/tmp/wpa_supplicant.conf - файл конфигурации WPA/WPA2 суппликанта, генерируется автоматически

---

h3. Пример конфигурационного файла /mnt/mtd/ipcam.conf

pre. #
# ZFT Lab. 2018 | http://zftlab.org/pages/2018010700.html
# Simple example of IPCam config (autogenerated)
#
device_name=IPCam                 # Имя устройства
device_tid=0012140138CA           # Идентификатор устройства на базе MAC eth0
storage_enable=0                  # Активация драйвера USB флешки
telegram_enable=                  # -пока не используется-
telegram_token=                   # -пока не используется-
telegram_rupor=                   # -пока не используется-
vtund_enable=1                    # Активация VTUNd клиента
vtund_server=vbox3.flymon.net     # DNS имя или IP адрес VTUNd сервера
vtund_port=7321                   # -пока не используется- Жёстко 5000
vtund_password=02e3e2266b9d...    # -пока не используется- Автогенерация
wifi_enable=1                     # Активация драйвера USB WiFi (только MT7601 и RT3070)
wifi_ssid=CRMTGA                  # SSID точки доступа
wifi_pass=crmtga2008fly           # Пароль точки доступа (psk создаётся автоматически)
wifi_type=auto                    # -пока не используется- Автодетект mt7601/rt3070
wifi_iface=auto                   # -пока не используется- Автодетект ra0/eth2
wifi_psk=auto                     # -пока не используется- Автогенерация psk
wifi_proto=auto                   # -пока не используется- Жёстко WPA2
wifi_auth=auto                    # -пока не используется- Жёстко AES/CCMP
wifi_network=dhcp                 # -пока не используется- Жёстко DHCP
#

---

h3. Расчёт максимального размера разделов, предоставленный ESonya

pre. #####################################
custom-x.cramfs.img   40000h   262144
romfs-x.cramfs.img   370000h  3604480
user-x.cramfs.img    280000h  2621440
web-x.cramfs.img     140000h  1310720
#####################################

---

h3. Прошивки и патчи к ним

* Принять участие в тестировании можно после письменного обращения на контактный Email.
* По мере тесттирования, прошивки с частью функционала будут лежать в открытом доступе.

---

h3. Внутренние ссылки

<ul>
  {% assign pages_list = site.posts %}
  {% assign group = 'ipcam' %}
  {% include JB/pages_list %}
</ul>

---

h3. Внешние ссылки

* -

